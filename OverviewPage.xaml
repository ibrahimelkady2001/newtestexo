<?xml version="1.0" encoding="utf-8" ?>
<TabbedPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            xmlns:xct="http://schemas.microsoft.com/dotnet/2022/maui/toolkit" 
            xmlns:xct2="http://xamarin.com/schemas/2020/toolkit"
            xmlns:models="clr-namespace:EXOApp.Models"
            xmlns:helpers="clr-namespace:EXOApp.Helpers"
            x:Class="EXOApp.OrbitOverviewPage"
            xmlns:windows="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.WindowsSpecific;assembly=Microsoft.Maui.Controls" xmlns:Helpers="clr-namespace:EXOApp.Helpers"
            windows:TabbedPage.HeaderIconsEnabled="true"
            BarBackgroundColor="{Binding Color}"
            SelectedTabColor ="#1a9fc7"
            UnselectedTabColor="black"
            BackgroundColor="{StaticResource SecondaryColour}"
            ItemsSource="{Binding orbits}"
            >
    <TabbedPage.BindingContext>
        <models:OverviewViewModel/>
    </TabbedPage.BindingContext>

    <TabbedPage.Resources>
        <ResourceDictionary>
            <xct:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </TabbedPage.Resources>

    <windows:TabbedPage.HeaderIconsSize>
        <Size>
            <x:Arguments>
                <x:Double>100</x:Double>
                <x:Double>50</x:Double>
            </x:Arguments>
        </Size>
    </windows:TabbedPage.HeaderIconsSize>
    <!--Pages can be added as references or inline-->
    <TabbedPage.ItemTemplate>
        <DataTemplate>
            
            <ContentPage Title="{Binding TabString}" IconImageSource="{Binding IconImage}" Padding="0" IsEnabled="{Binding ControlAvailable}">
                <Grid Margin="0,10,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="70"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="1.8*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="70"/>
                    </Grid.RowDefinitions>

                    <Frame Grid.Column="0" Grid.Row="0" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"   Padding="0" >
                        <Grid>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Base.png}" Aspect="AspectFill"/>
                            
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.100.png}" Aspect="AspectFill" IsVisible="{Binding F100}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.75.png}" Aspect="AspectFill" IsVisible="{Binding F75}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.50.png}" Aspect="AspectFill" IsVisible="{Binding F50}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.25.png}" Aspect="AspectFill" IsVisible="{Binding F25}"/>

                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Empty.png}" Aspect="AspectFill" IsVisible="{Binding EmptyLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Fill.png}" Aspect="AspectFill" IsVisible="{Binding FillLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Standby.png}" Aspect="AspectFill" IsVisible="{Binding StandbyLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Skim.png}" Aspect="AspectFill" IsVisible="{Binding SkimLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Saltmix.png}" Aspect="AspectFill" IsVisible="{Binding SaltMixLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Stop.png}" Aspect="AspectFill" IsVisible="{Binding StopLights}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Float.png}" Aspect="AspectFill" IsVisible="{Binding FloatLights}"/>

                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Closed.png}" Aspect="AspectFill" IsVisible="{Binding DoorOpen, Converter={StaticResource InvertedBoolConverter}}"/>
                            <Image Source="{helpers:ImageResource Assets.Images.Renders.Open.png}" Aspect="AspectFill" IsVisible="{Binding DoorOpen}"/>

                            <Image Source="{helpers:ImageResource Assets.Images.warningTriangle.png}" Aspect="AspectFill" IsVisible="{Binding AssistAlarmTriangle}"/>
                        </Grid>
                    </Frame>

                    <Grid Grid.Column="0" Grid.Row="1" Margin="0,0,0,0">
                        <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <Frame Grid.Column="1" Grid.RowSpan="1" VerticalOptions="FillAndExpand" BackgroundColor ="White" Margin="0,0,0,0" Padding="10" > 
                                <Grid HorizontalOptions="CenterAndExpand">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <StackLayout Grid.Column="0" Grid.Row="0" IsVisible="{Binding AssistAlarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.Help.png}" Command="{Binding AlarmCommand}" CommandParameter="Assist"/>
                                    </StackLayout>
                                    <StackLayout Grid.Column="1" Grid.Row="0" IsVisible="{Binding FilterAlarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.Filter_2.png }" Command="{Binding AlarmCommand}" CommandParameter="Filter"/>
                                    </StackLayout>
                                    <StackLayout Grid.Column="2" Grid.Row="0" IsVisible="{Binding H2o2Alarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.H2O2_Empty.png}" Command="{Binding AlarmCommand}" CommandParameter="H2O2" />
                                    </StackLayout>
                                    <StackLayout Grid.Column="0" Grid.Row="1" IsVisible="{Binding PodNotRespondingAlarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.BE_Crash.png}" Command="{Binding AlarmCommand}" CommandParameter="Responding"/>
                                    </StackLayout>
                                    <StackLayout Grid.Column="1" Grid.Row="1" IsVisible="{Binding ConnectionAlarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.Connection_Lost.png}" Command="{Binding AlarmCommand}" CommandParameter="Connection"/>
                                    </StackLayout>
                                    <StackLayout Grid.Column="2" Grid.Row="1" IsVisible="{Binding UvAlarm}" HorizontalOptions="CenterAndExpand">
                                        <ImageButton Source="{helpers:ImageResource Assets.Images.Alarm.UV.png}" Command="{Binding AlarmCommand}" CommandParameter="UV"/>
                                    </StackLayout>
                                    
                                </Grid>
                            </Frame>
                            <Frame Grid.Column="0" Grid.RowSpan="1" VerticalOptions="FillAndExpand" BackgroundColor ="White" Margin="0,0,0,0" Padding="10">
                                <StackLayout>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Image Grid.Column="0" Source="{helpers:ImageResource Assets.Images.TemperatureDial.TemperatureDial.png}" Aspect="AspectFit"/>
                                        <Image Grid.Column="0" Source="{helpers:ImageResource Assets.Images.TemperatureDial.TemperaturePointer.png}" Aspect="AspectFit" Rotation="{Binding InfoTempDial}"/>
                                        <Label Text="{Binding Temperature}" HorizontalOptions="Center" VerticalOptions="Center"/>
                                        <StackLayout Grid.Column="1" VerticalOptions="Center">
                                            <Label Text="{Binding TabString}" HorizontalOptions="Center" FontAttributes="Bold" FontSize="Medium"/>
                                            <Label Text="{Binding PodStatus}" HorizontalOptions="Center" TextColor="Green"/>
                                        </StackLayout>
                                        
                                    </Grid>
                                    <ProgressBar ScaleY="3" Progress="{Binding InfoProgress}" ProgressColor="{StaticResource PrimaryColour}"/>
                                    <Label Text="{Binding InfoMode}" HorizontalTextAlignment="Center"/>
                                </StackLayout>
                            </Frame>
                        </Grid>
                    </Grid>

                    <Frame Grid.Column="1" Grid.Row="0" Grid.ColumnSpan="2" Grid.RowSpan="2" VerticalOptions="FillAndExpand" BorderColor="White" HorizontalOptions="FillAndExpand" BackgroundColor="White" Padding="10,3,10,3">
                        <xct2:SideMenuView State="{Binding SideMenuState}">
                            <!-- Main View-->
                            <Grid xct2:SideMenuView.Position="MainView" BackgroundColor="White">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="0.1*"/>
                                </Grid.ColumnDefinitions>
                                <StackLayout >
                                    <Label Text="Float Settings" FontSize="Large" TextColor="{StaticResource PrimaryColour}"/>
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Float Time" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding FloatTimeList}" SelectedIndex="{Binding SelectedFloatTime}"/>
                                    </StackLayout>
                                    <StackLayout Orientation="Horizontal" IsVisible="{Binding FloatSliderVisible}" HeightRequest="40">
                                        <Label Text="{Binding FloatSliderLabel}" WidthRequest="300"/>
                                        <Slider WidthRequest="300" Value="{Binding FloatSliderValue}" Maximum="36" Minimum="2" />
                                    </StackLayout>

                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Fill Delay" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding FillDelayList}" SelectedIndex="{Binding SelectedFillDelay}"/>
                                    </StackLayout>

                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Starting Music Duration" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding MusicProfileListStart}" SelectedIndex="{Binding SelectedMusicStartTime}" />
                                    </StackLayout>
                                    <StackLayout Orientation="Horizontal" IsVisible="{Binding MusicSliderVisible}"  HeightRequest="40">
                                        <Label Text="{Binding StartMusicLabel}" WidthRequest="300"/>
                                        <Slider WidthRequest="300" Value="{Binding MusicSliderStartValue}" Maximum="30" Minimum="1"/>
                                    </StackLayout>
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Ending Music Duration" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding MusicProfileListEnd}" SelectedIndex="{Binding selectedMusicEndTime}" IsVisible="{Binding EndMusicSelectVisible}"/>
                                    </StackLayout>
                                    <StackLayout Orientation="Horizontal" IsVisible="{Binding MusicSliderVisible}"  HeightRequest="40">
                                        <Label Text="{Binding EndMusicLabel}" WidthRequest="300"/>
                                        <Slider WidthRequest="300" Value="{Binding MusicSliderEndValue}" Maximum="30" Minimum="1"/>
                                    </StackLayout>
                                    <StackLayout IsVisible="{Binding FloatSliderVisible, Converter={StaticResource InvertedBoolConverter}}" HeightRequest="40">
                                        <Label Text=""/>
                                    </StackLayout>
                                    <StackLayout IsVisible="{Binding MusicSliderVisible, Converter={StaticResource InvertedBoolConverter}}" HeightRequest="80">
                                        <Label Text=""/>
                                    </StackLayout>

                                    <Label Text="Float Customisation" FontSize="Large" TextColor="{StaticResource PrimaryColour}"/>
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Lighting Choice" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding LightProfileList}" SelectedIndex="{Binding selectedLights}"/>
                                    </StackLayout>

                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Starting Music" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding MusicList}" SelectedIndex="{Binding selectedMusicStart}"/>
                                    </StackLayout>

                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Ending Music" WidthRequest="300"/>
                                        <Picker ItemsSource="{Binding MusicList}" SelectedIndex="{Binding selectedMusicEnd}"/>
                                    </StackLayout>
                                </StackLayout>
                                <Button Grid.Column="1" VerticalOptions="FillAndExpand" Text="&lt;&gt;" Command="{Binding SwitchMenu}"/>
                            </Grid>
                            <!-- Side View-->
                            <Grid xct2:SideMenuView.Position="RightMenu" BackgroundColor="White" xct2:SideMenuView.MenuWidthPercentage="0.9">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <!--0,0-->
                                <Grid Grid.Column="0" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Settings.png}" HorizontalOptions="Fill" Command="{Binding MaintenanceCommand}" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Settings" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--1,0-->
                                <Grid Grid.Column="1" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Dose.png}" HorizontalOptions="Fill" Command="{Binding OrbitCommand}" CommandParameter="dosing" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Dose" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
               
                                <!--2,0-->

                                <Grid Grid.Column="2" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Salt_Mix.png}" HorizontalOptions="Fill" Command="{Binding OrbitCommand}" CommandParameter="salt-mix"  Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Salt Mix" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--3,0-->
                                <Grid Grid.Column="3" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Music.png}" HorizontalOptions="Fill" Command="{Binding MusicCommand}" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Music" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--4,0-->
                                <Grid Grid.Column="4" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Reboot.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Restart" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Restart" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--5,0-->
                                <Grid Grid.Column="5" Grid.Row="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Ban.png}" HorizontalOptions="Fill" Command="{Binding OrbitCommand}" CommandParameter="servicepod" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Service (Fill Pod)" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--0,1-->
                                <Grid Grid.Column="0" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Shutdown.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Shutdown" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Shutdown" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--1,1-->
                                <Grid Grid.Column="1" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.LogOff.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Shutdown" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Log Off" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--2,1-->
                                <Grid Grid.Column="2" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Support.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Shutdown" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Support" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--3,1-->
                                <Grid Grid.Column="3" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Logs.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Shutdown" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Float Logs" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--4,1-->
                                <Grid Grid.Column="4" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Lighting.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Shutdown" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Float Lights" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--5,1-->
                                <Grid Grid.Column="5" Grid.Row="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Close.png}" HorizontalOptions="Fill" Command="{Binding ExtraButtonCommand}" CommandParameter="Quit" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Close" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--0,2-->
                                <Grid Grid.Column="0" Grid.Row="2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Hibernate.png}" HorizontalOptions="Fill" Command="{Binding OrbitCommand}" CommandParameter="hibernate" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Close" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>
                                <!--1,2-->
                                <Grid Grid.Column="1" Grid.Row="2">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="1.25*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <ImageButton Source="{helpers:ImageResource Assets.Images.FunctionIcons.Ban.png}" HorizontalOptions="Fill" Command="{Binding OrbitCommand}" CommandParameter="serviceres" Aspect="AspectFit" Grid.Row="0"/>
                                    <Label Text="Service (Fill Res)" FontSize="15" HorizontalOptions="Center" Grid.Row="1"/>
                                </Grid>


                            </Grid>
                        </xct2:SideMenuView>
                    </Frame>
                    <Frame Grid.Row="2" Grid.ColumnSpan="3" VerticalOptions="FillAndExpand" BackgroundColor ="white" Padding="0,5,0,5">
                        <Grid VerticalOptions="FillAndExpand">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Button Grid.Column="0" Text="Start" WidthRequest="200" HorizontalOptions="Center" BackgroundColor="#00AA00" Command="{Binding OrbitCommand}" CommandParameter="start" IsEnabled="{Binding ButtonsEnabled}"/>
                            <Button Grid.Column="1" Text="Stop" WidthRequest="200" HorizontalOptions="Center" BackgroundColor="#000000" BorderColor="#AF0000" BorderWidth="5" Command="{Binding OrbitCommand}" CommandParameter="stop"/>
                            <Button Grid.Column="2" Text="Empty" WidthRequest="200" HorizontalOptions="Center" Command="{Binding OrbitCommand}" CommandParameter="end"/>
                            <Button Grid.Column="3" Text="Skim" WidthRequest="200" HorizontalOptions="Center" Command="{Binding OrbitCommand}" CommandParameter="skimmer" IsEnabled="{Binding ButtonsEnabled}"/>
                            <Button Grid.Column="4" Text="Standby" WidthRequest="200" HorizontalOptions="Center" Command="{Binding OrbitCommand}" CommandParameter="standby"/>
                        </Grid>
                    </Frame>
                
                    <Frame Grid.ColumnSpan="3" Grid.RowSpan="3" BackgroundColor="Black" Opacity="0.5" IsVisible="{Binding WaitingBar}"/>
                    <Grid Grid.ColumnSpan="3" Grid.RowSpan="3" IsVisible="{Binding WaitingBar}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackLayout Grid.Column="1" Grid.Row="1">
                            <Frame BackgroundColor="{StaticResource PrimaryColour}" HorizontalOptions="Center" HeightRequest="150" Padding="3">
                                <Frame BackgroundColor="White" HorizontalOptions="Center" VerticalOptions="FillAndExpand" Padding="10" Margin="8">
                                    <StackLayout VerticalOptions="CenterAndExpand">
                                        <Label Text="Please Wait" HorizontalOptions="CenterAndExpand" FontSize="40"/>
                                        <ActivityIndicator IsRunning="True" Color="{StaticResource AccentColour}" Scale="2" HorizontalOptions="Center" VerticalOptions="FillAndExpand"/>
                                    </StackLayout>
                                </Frame>
                            </Frame>
                        </StackLayout>
                    </Grid>
                </Grid>
            </ContentPage>
        </DataTemplate>
    </TabbedPage.ItemTemplate>


</TabbedPage>